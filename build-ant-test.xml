<project name="jaywalker-ant-test" default="all">

    <property file="build.properties"/>

    <target name="all"/>

    <path id="path.jaywalker">
        <pathelement location="build/dist/jaywalker-${project.version}.jar"/>
        <pathelement location="build/dist/jaywalker-ant-${project.version}.jar"/>
        <pathelement location="tools/bcel/bcel-5.1.jar"/>
        <pathelement location="tools/ant/ant-testutil-1.6.3.jar"/>
        <pathelement location="tools/xalan/xalan-2.7.0.jar"/>
        <pathelement location="tools/xalan/serializer.jar"/>
    </path>

    <target name="init">
        <mkdir dir="build/temp"/>
        <taskdef name="jaywalker" classname="jaywalker.ant.JayWalkerTask" classpathref="path.jaywalker"/>
    </target>

    <target name="testTaskOutputNotPresent" depends="init">
        <jaywalker/>
    </target>

    <target name="testTaskClasslistNotPresent" depends="init">
        <jaywalker outDir="build/temp/output"/>
    </target>

    <target name="testUnifiedReportForClassElement" depends="init">
        <jaywalker outDir="build/temp/JayWalkerTaskTest.testUnifiedReportForClassElement" tempDir="build/temp">
            <classlist file="build/classes/jaywalker/classlist/ClasslistElementFactory.class"/>
            <option name="dependency" value="archive,package,class"/>
            <option name="cycle" value="archive,package,class"/>
            <option name="collision" value="class"/>
            <option name="conflict" value="class"/>
        </jaywalker>
    </target>

    <target name="testUnifiedReportForClassesDirectory" depends="init">
        <jaywalker outDir="build/temp/JayWalkerTaskTest.testUnifiedReportForClassesDirectory" tempDir="build/temp">
            <classlist file="build/classes"/>
        </jaywalker>
    </target>

    <target name="testUnifiedReportForTest1Archive" depends="init">
        <jaywalker outDir="build/temp/JayWalkerTaskTest.testUnifiedReportForTest1Archive" tempDir="build/temp">
            <classlist file="build/dist/jaywalker-test1.jar"/>
        </jaywalker>
    </target>

    <target name="testUnifiedReportForTest2Archive" depends="init">
        <jaywalker outDir="build/temp/JayWalkerTaskTest.testUnifiedReportForTest2Archive" tempDir="build/temp">
            <classlist file="build/dist/jaywalker-test2.jar"/>
        </jaywalker>
    </target>

    <target name="testUnifiedReportForTest1Test2Archive" depends="init">
        <jaywalker outDir="build/temp/JayWalkerTaskTest.testUnifiedReportForTest1Test2Archive" tempDir="build/temp">
            <classlist file="build/dist/jaywalker-test1.jar"/>
            <classlist file="build/dist/jaywalker-test2.jar"/>
        </jaywalker>
    </target>
    

    <target name="testUnifiedReportForTest4Archive" depends="init">
        <jaywalker outDir="build/temp/JayWalkerTaskTest.testUnifiedReportForTest4Archive" tempDir="build/temp">
            <classlist file="build/dist/jaywalker-test4.jar"/>
        </jaywalker>
    </target>

    <target name="testUnifiedReportForEarArchive" depends="init">
        <jaywalker outDir="build/temp/JayWalkerTaskTest.testUnifiedReportForEarArchive" tempDir="build/temp">
            <classlist file="build/dist/jaywalker-test.ear"/>
        </jaywalker>
    </target>

    <target name="testUnifiedReportForBuiltArchives" depends="init">
        <jaywalker outDir="build/temp/JayWalkerTaskTest.testUnifiedReportForBuiltArchives" tempDir="build/temp">
            <classlist file="build/dist"/>
            <classlist file="tools/ant/ant-testutil-1.6.3.jar"/>
        </jaywalker>
    </target>

    <target name="testUnifiedReportForCycle1AndCycle2Archive" depends="init">
        <jaywalker outDir="build/temp/JayWalkerTaskTest.testUnifiedReportForCycle1AndCycle2Archive" tempDir="build/temp">
            <classlist file="build/dist/jaywalker-cycle-part1.jar"/>
            <classlist file="build/dist/jaywalker-cycle-part2.jar"/>
            <option name="cycle" value="archive,package,class"/>
        </jaywalker>
    </target>

    <target name="testUnifiedReportForWeblogic" depends="init">
        <jaywalker outDir="build/temp/JayWalkerTaskTest.testUnifiedReportForWeblogic" tempDir="c:\temp\weblogic-temp">
            <classlist file="c:\temp\weblogic"/>
        </jaywalker>
    </target>

</project>